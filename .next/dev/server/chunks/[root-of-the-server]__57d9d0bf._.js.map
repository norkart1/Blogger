{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/lib/mongodb.ts"],"sourcesContent":["import { MongoClient, type Db } from \"mongodb\"\n\nconst MONGODB_URI = process.env.MONGODB_URI || \"\"\n\nif (!MONGODB_URI) {\n  console.warn(\"MONGODB_URI environment variable is not set\")\n}\n\nlet cachedClient: MongoClient | null = null\nlet cachedDb: Db | null = null\n\nexport async function connectToDatabase(): Promise<{ client: MongoClient; db: Db }> {\n  if (cachedClient && cachedDb) {\n    return { client: cachedClient, db: cachedDb }\n  }\n\n  if (!MONGODB_URI) {\n    throw new Error(\"Please define the MONGODB_URI environment variable\")\n  }\n\n  const client = new MongoClient(MONGODB_URI)\n  await client.connect()\n  const db = client.db(\"blog_hub\")\n\n  cachedClient = client\n  cachedDb = db\n\n  return { client, db }\n}\n\nexport async function getCollection<T extends Document>(collectionName: string) {\n  const { db } = await connectToDatabase()\n  return db.collection<T>(collectionName)\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAE/C,IAAI,CAAC,aAAa;IAChB,QAAQ,IAAI,CAAC;AACf;AAEA,IAAI,eAAmC;AACvC,IAAI,WAAsB;AAEnB,eAAe;IACpB,IAAI,gBAAgB,UAAU;QAC5B,OAAO;YAAE,QAAQ;YAAc,IAAI;QAAS;IAC9C;IAEA,IAAI,CAAC,aAAa;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,SAAS,IAAI,sHAAW,CAAC;IAC/B,MAAM,OAAO,OAAO;IACpB,MAAM,KAAK,OAAO,EAAE,CAAC;IAErB,eAAe;IACf,WAAW;IAEX,OAAO;QAAE;QAAQ;IAAG;AACtB;AAEO,eAAe,cAAkC,cAAsB;IAC5E,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;IACrB,OAAO,GAAG,UAAU,CAAI;AAC1B"}},
    {"offset": {"line": 94, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/posts/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { connectToDatabase } from \"@/lib/mongodb\"\nimport type { Post } from \"@/lib/types\"\nimport { ObjectId } from \"mongodb\"\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { db } = await connectToDatabase()\n    const searchParams = request.nextUrl.searchParams\n    const search = searchParams.get(\"search\") || \"\"\n    const category = searchParams.get(\"category\") || \"\"\n    const status = searchParams.get(\"status\") || \"\"\n\n    const query: Record<string, unknown> = {}\n\n    if (search) {\n      query.$or = [\n        { title: { $regex: search, $options: \"i\" } },\n        { content: { $regex: search, $options: \"i\" } },\n        { excerpt: { $regex: search, $options: \"i\" } },\n      ]\n    }\n\n    if (category && category !== \"all\") {\n      query.category = category\n    }\n\n    if (status && status !== \"all\") {\n      query.status = status\n    }\n\n    const posts = await db.collection<Post>(\"posts\").find(query).sort({ createdAt: -1 }).toArray()\n\n    return NextResponse.json(posts)\n  } catch (error) {\n    console.error(\"Error fetching posts:\", error)\n    return NextResponse.json({ error: \"Failed to fetch posts\" }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { db } = await connectToDatabase()\n    const body = await request.json()\n\n    const slug = body.slug || body.title\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/(^-|-$)/g, \"\")\n\n    const now = new Date()\n    const post: Omit<Post, \"_id\"> = {\n      title: body.title,\n      slug,\n      content: body.content || \"\",\n      excerpt: body.excerpt || \"\",\n      authorId: body.authorId || \"\",\n      authorName: body.authorName || \"\",\n      category: body.category || \"Other\",\n      tags: body.tags || [],\n      status: body.status || \"draft\",\n      publishedAt: body.status === \"published\" ? now : undefined,\n      createdAt: now,\n      updatedAt: now,\n    }\n\n    const result = await db.collection<Post>(\"posts\").insertOne(post as Post)\n\n    return NextResponse.json({ ...post, _id: result.insertedId }, { status: 201 })\n  } catch (error) {\n    console.error(\"Error creating post:\", error)\n    return NextResponse.json({ error: \"Failed to create post\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(request: NextRequest) {\n  try {\n    const { db } = await connectToDatabase()\n    const body = await request.json()\n    const { _id, ...updateData } = body\n\n    if (updateData.status === \"published\" && !updateData.publishedAt) {\n      updateData.publishedAt = new Date()\n    }\n\n    const result = await db\n      .collection<Post>(\"posts\")\n      .updateOne({ _id: new ObjectId(_id) }, { $set: { ...updateData, updatedAt: new Date() } })\n\n    if (result.matchedCount === 0) {\n      return NextResponse.json({ error: \"Post not found\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ success: true })\n  } catch (error) {\n    console.error(\"Error updating post:\", error)\n    return NextResponse.json({ error: \"Failed to update post\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(request: NextRequest) {\n  try {\n    const { db } = await connectToDatabase()\n    const { searchParams } = new URL(request.url)\n    const id = searchParams.get(\"id\")\n\n    if (!id) {\n      return NextResponse.json({ error: \"Post ID required\" }, { status: 400 })\n    }\n\n    const result = await db.collection<Post>(\"posts\").deleteOne({ _id: new ObjectId(id) })\n\n    if (result.deletedCount === 0) {\n      return NextResponse.json({ error: \"Post not found\" }, { status: 404 })\n    }\n\n    return NextResponse.json({ success: true })\n  } catch (error) {\n    console.error(\"Error deleting post:\", error)\n    return NextResponse.json({ error: \"Failed to delete post\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":"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"}}]
}